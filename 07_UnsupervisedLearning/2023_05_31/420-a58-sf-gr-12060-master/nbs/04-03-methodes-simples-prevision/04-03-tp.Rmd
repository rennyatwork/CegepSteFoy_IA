---
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**420-A58-SF - Algorithmes d'apprentissage non supervisé - Été 2021 - Spécialisation technique en Intelligence Artificielle**
MIT License - Copyright (c) 2021 Mikaël Swawola

```{r 04-03-tp-banner, echo=FALSE, fig.cap="", out.width='100%'}
knitr::include_graphics("static/04-03-tp-banner.png")
```

**Objectif: Mise en oeuvre de méthodes prévisions simples sur le jeu de données "lait"**

### Librairies

```{r libraries}
# Compléter les librairies au fur et à mesure du TP ~ 2 librairies requises
library(ggplot2)
library(fpp2)
```


### Exercice 1-1
**Importez la série mensuelle "lait.dat" démarrant en janvier 2005. Affichez la série.**
```{r ex1_1}
# Votre code ici ~ 4-5 lignes de code
data <-read.table("../../data/lait.dat")
lait <- data
myts <- ts(lait, start=2005, frequency=12)
print(myts)

lait <- ts(lait, start=c(2005, 1), frequency=12)
autoplot(lait)
```


### Exercice 1-2
**Séparez les données en deux parties ( la première "lait.train" allant de janvier 2005 à décembre 2017, et l’autre "lait.test", démarrant en janvier 2018). Afficher les deux séries sur un même graphique.**
```{r ex1_2}
# Votre code ici ~ 5 lignes de code
# Split the time series based on date criteria

lait.train <- window(lait, end=c(2017,12))
lait.test <- window(lait, start=c(2018,1))

autoplot(lait) +
  autolayer(lait.train, series = "Training") +
  autolayer(lait.test, series = "Test") 

  
  
  
  
# Define the start and end dates for the training and test datasets
train_start <- as.Date("2005-01-01")
train_end <- as.Date("2017-12-31")
test_start <- as.Date("2018-01-01")

# Create the training dataset
lait.train <- window(myts, start = train_start, end = train_end)

# Create the test dataset
lait.test <- window(myts, start = test_start)

# Print the training and test datasets
print(lait.train)
print(lait.test)

lait_train <- subset(myts, end(time(myts)) < as.Date("2018"))

# Print the split time series
print(lait_train )
```


### Exercice 1-3
**Calculez les prévisions saisonnières naïves sur 12 mois à partir de la série "lait.train". Faites un graphique.**
```{r ex1_3}
# Votre code ici ~ 4 lignes de code
fc <- snaive(lait.train, h=12)
autoplot(lait.train) +
  autolayer(fc, series= "Prevision", PI=F) +
  autolayer(lait.test, series= "Test")
```


### Exercice 1-4
**Comparez la pertinence de vos prévisions vis-à-vis du réalisé a posteriori.**
```{r ex1_4}
# Votre code ici ~ 1 ligne de code
accuracy(fc, lait.test)
```


### Exercice 1-5
**Examinez les résidus et commentez.**
```{r ex1_5}
# Votre code ici ~ 1 ligne de code
checkresiduals(fc)

# Il reste de l'information dans le résidu
# La distribution n'a pas une moyenne nulle
# On rejette l'hypothèse du white noise
```
